# Mitigação de uso de swap em PostgreSQL (Produção)

## Contexto
- Ambiente: Proxmox
- VM PostgreSQL: 24 GB RAM
- Situação: Produção ativa, véspera de Ano Novo
- Sintoma: Uso de swap mesmo com RAM disponível

## Diagnóstico
Saída do `free -h` indicava:
- RAM disponível: ~15 GB
- Swap em uso: ~500 MB

Conclusão: pressão de memória causada por configuração padrão + política do kernel.

## Ação tomada (sem downtime)

Ajuste do parâmetro do kernel:

```bash
sysctl -w vm.swappiness=10

## Resultado

- Swap estabilizou (~50 MB residual)
- Nenhum restart necessário
- Ambiente permaneceu estável

## Decisão

Não realizar ajustes no PostgreSQL em produção sem janela de manutenção.

## Próximos passos

- Revisar shared_buffers, work_mem e max_connections
- Reiniciar PostgreSQL em janela controlada
- Avaliar redução de RAM da VM
